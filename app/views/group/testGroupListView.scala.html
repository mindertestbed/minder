@import java.util.concurrent.atomic.AtomicInteger
@import views.html.util._

@import authentication._


@main("Test Groups", "testGroups",
  Array(("Test Groups", controllers.routes.Application.testGroups().path()))){
  @dialogs()
  <script>
      $(function() {
        $( document ).tooltip();
      });
  </script>

  @defining(new AtomicInteger(1)) { index =>
    <table class="datatable shaded">
      @createFirstRow {
        <th>Test Group Name</th>
        <th>Short Description</th>
        <th>Author</th>
      }
      @for( tg <- TestGroup.findAll()) {
        <tr>
          <td>@index.getAndIncrement()</td> <td><a href="/getGroupDetailView?id=@tg.id&display=assertions">@tg.name</a></td> <td>@tg.shortDescription</td>
          <td>@tg.owner.name @tg.owner.email</td>
          @subjectIsOr(tg.owner) {
            <td style="border:1px solid white; background-color: white;">

            <div title="Delete" class="bevel2 celldiv" style="height:30px ; width:30px ; cursor:hand ;"
            onclick='deleteWithDialog2("/doDeleteGroup?id=@tg.id", $("#dialog-confirm"), "Delete Group", "group", "@tg.name")'>
              <img src="@routes.Assets.versioned("/images/trash2-64.png")" height="16px" alt='@tg.id'/>
            </div>
          </td>
          }{
            <td style="background-color:transparent;border:1px solid white;">&nbsp;</td>
          }
        </tr>
      }

      @subjectHasRole(security.Role.TEST_DESIGNER) {
        @createLastRow(4) {
          @createButton("/getCreateGroupEditorView", Messages("restrictedTestPage.createTestGroup"))
        }
      }
  }
</table>
}
