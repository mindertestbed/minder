@(tg: TestGroup)

@import java.util.concurrent.atomic.AtomicInteger
@import views.html.util._

@import views.html.util._
@import authentication._

<script>
    $(function() {
      $( document ).tooltip();
    });
</script>


@subjectHasRole(security.Role.TEST_DESIGNER) {
  @createLinkButton("/getCreateAssertionEditorView?groupId=" + tg.id, Messages("restrictedTestPage.createTestAssertion"))
  <br />
  <br />
}

@if(tg.testAssertions.size() > 0) {
  <table class="table table-hover table-condensed table-striped">
    @createFirstRow {
      <th>Test Assertion Id</th>
      <th>Target</th>
      <th>Author</th>
    }
    @defining(new AtomicInteger(1)) { index =>
      @for(ta <- TestAssertion.findByGroup(tg)) {
        <tr>
          <td>@index.getAndIncrement()</td> <td><a href="@controllers.routes.TestAssertionController.getAssertionDetailView(ta.id)">@ta.taId</a></td> <td>@ta.target</td>
          <td>@ta.owner.email</td>
          @subjectIs(ta.owner) {
            <td>
              <div title="Delete" class="bevel2 celldiv" style="height:30px ; width:30px ; cursor:hand ;"
              onclick='deleteWithDialog("/doDeleteAssertion?id=@ta.id", $("#dialog-confirm"), "Delete Test Assertion", "test assertion", "@ta.taId")'>
                <img src="@routes.Assets.versioned("/images/trash2-64.png")" height="16px" alt='@ta.id'/>
              </div>

            </td>
          }
        </tr>
      }
    }
  </table>
}
