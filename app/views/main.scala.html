@import authentication._
@import util._

@(title: String, nav: String = "", navObject: Object = null)(content: Html)


<!DOCTYPE html>

<html lang="@lang().code()">
  <head>
    <title>@title</title>
    @main_header()
  </head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse navbarim" role="navigation">
      <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="navbar-brand">
            <a href="@routes.Application.index()"><img src="@routes.Assets.versioned("/images/mindersmall.png")" height="34px"/></a>
          </span>
        </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li class="@("active".when(nav == "testGroups"))"><a href="@routes.Application.testGroups()">Inventory</a>
            </li>
            <li class="@("active".when(nav == "adapters"))"><a href="@routes.Application.adapters()">Adapters</a></li>
            <li class="@("active".when(nav == "jobQueue"))"><a href="@routes.Application.jobQueue()">Test Monitor</a></li>
            <li class="@("active".when(nav == "about"))"><a href="@routes.Application.about()">About</a></li>

            @defining(Authentication.getLocalUser()) { user =>
              @if(user != null && user.email == "root@minder") {
                <li class="@("active".when(nav == "root"))"><a href="@routes.Application.root()">@Messages("authenticate.root")</a></li>
              }
            }
              <!--
            @subjectNotPresent {
              SIGNUP DISABLED
            }
              -->
          </ul>

          @subjectPresentOr {
            <ul class="nav navbar-nav navbar-right">
            @defining(Authentication.getLocalUser()) { user =>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="glyphicon glyphicon-user"></i>@user.name <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li class="@("active".when(nav == "profile"))"><a href="@routes.Application.profile()">@Messages("authenticate.profile")</a></li>
                  <li class="divider"></li>
                  <li><a href="@routes.Authentication.doLogout()"><i class="icon-off"></i> @Messages("authenticate.logout")</a></li>
                </ul>
              </li>
            }
            </ul>
          } {
            <a href="@routes.Authentication.login()" class=" navbar-right btn btn-default navbar-btn @("disabled".when(nav == "login"))">@Messages("authenticate.login")</a>
          }

        </div> <!-- /.navbar-collapse -->
      </div> <!-- /.container-fluid -->

      <div>
      @drawNavigation(navObject)
      </div>
    </nav>

    @if(flash.contains(Authentication.FLASH_ERROR_KEY)) {
      <div class="alert alert-danger" role="alert">
        <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">
          Close</span></button>
        @flash().get(Authentication.FLASH_ERROR_KEY)
      </div>
    }
    @if(flash.contains(Authentication.FLASH_MESSAGE_KEY)) {
      <div class="alert alert-success" role="alert">
        <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">
          Close</span></button>
        @flash().get(Authentication.FLASH_MESSAGE_KEY)
      </div>
    }

    <div class="container" style="padding-top:70px ;padding-left:0;padding-right: 0;margin:0;width:100%;height:100%;">
    @content
    </div>
    <footer style="position:fixed ; top:calc(100% - 10px) ; left:0 ; width:100% ; height:5px ;">
      <table style="width:97% ;"><tr><td style="text-align:right ; font-size:8px ;">&copy;
        eSENS 2015-2020, icons: <a href="http://glyphicons.com">http://glyphicons.com</a></td>
      </tr>
      </table>
    </footer>
  </body>
</html>
